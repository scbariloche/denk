package com.example.andenk.schichtln.modeladapter

import android.app.Activity
import android.content.Context
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ArrayAdapter
import android.widget.ImageView
import android.widget.TextView
import com.example.andenk.schichtln.R
import com.example.andenk.schichtln.R.drawable.*
import com.example.andenk.schichtln.pojos.DayUserType
import kotlinx.android.synthetic.main.display_user_list.view.*
import java.text.SimpleDateFormat
import java.util.*

/**
 * Created by andenk on 04.12.2017.
 */


open class DetailListAdapter(context: Context?,
                             objects: MutableList<DayUserType>?) : ArrayAdapter<DayUserType>(context, 0, objects) {


    var objects: MutableList<DayUserType>? = objects
    var context: Activity = context as Activity
    var vi: LayoutInflater = context!!.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater


    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View? {
        var holder: ViewHolder
        var retView: View
        var item: DayUserType = objects!!.get(position)
        if (convertView == null) {
            retView = vi.inflate(R.layout.display_user_list, null)
            holder = ViewHolder()

            holder.tvDate = retView.display_userlist_tv1
            holder.tvType = retView.display_userlist_tv1
            holder.dot=retView.acc_dot




//        TODO:    holder.tvType!!.text = item.type.description

            var sdf = SimpleDateFormat("dd.MM.yy")

//         TOFO   var date = Date(item.day.date)
//        TODO:    holder.tvDate!!.text = sdf.format(date)

            when(item.a_id){
                1-> holder.dot!!.background=context.getDrawable(green_dot)
                2-> holder.dot!!.background=context.getDrawable(yellow_dot)
                3-> holder.dot!!.background=context.getDrawable(red_dot)
            }

            retView.tag = holder //error in this line

        } else {
            holder = convertView.tag as ViewHolder
            retView = convertView
        }

        return retView
    }



    internal class ViewHolder {
        var tvDate: TextView? = null
        var tvType: TextView? = null
        var dot:ImageView?=null
    }
}